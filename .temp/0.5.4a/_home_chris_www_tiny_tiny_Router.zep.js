[ { "type": "namespace", "name": "Tiny", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 3, "char": 5 }, { "type": "class", "name": "Router", "abstract": 0, "final": 0, "implements": [ { "type": "variable", "value": "Router\\RouterInterface", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 4, "char": 1 } ], "definition": { "properties": [ { "visibility": [ "protected" ], "type": "property", "name": "routes", "docblock": "**\n\t * Collection of routes\n\t * \n\t * @type \\ArrayObject\n\t *", "shortcuts": [ { "type": "shortcut", "name": "set", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 12, "char": 6 }, { "type": "shortcut", "name": "get", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 13, "char": 2 } ], "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 16, "char": 10 }, { "visibility": [ "protected" ], "type": "property", "name": "routeFactory", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 18, "char": 7 } ], "methods": [ { "visibility": [ "public" ], "type": "method", "name": "__construct", "statements": [ { "type": "let", "assignments": [ { "assign-type": "object-property", "operator": "assign", "variable": "this", "property": "routes", "expr": { "type": "new", "class": "\\ArrayObject", "dynamic": 0, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 20, "char": 38 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 20, "char": 38 } ], "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 21, "char": 5 }, { "type": "let", "assignments": [ { "assign-type": "object-property", "operator": "assign", "variable": "this", "property": "routeFactory", "expr": { "type": "new", "class": "Router\\RouteFactory", "dynamic": 0, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 21, "char": 51 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 21, "char": 51 } ], "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 22, "char": 2 } ], "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 30, "char": 3 }, { "visibility": [ "public" ], "type": "method", "name": "add", "parameters": [ { "type": "parameter", "name": "name", "const": 0, "data-type": "string", "mandatory": 1, "reference": 0, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 31, "char": 34 }, { "type": "parameter", "name": "path", "const": 0, "data-type": "string", "mandatory": 1, "reference": 0, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 31, "char": 48 }, { "type": "parameter", "name": "options", "const": 0, "data-type": "array", "mandatory": 0, "default": { "type": "empty-array", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 31, "char": 68 }, "reference": 0, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 31, "char": 68 } ], "statements": [ { "type": "if", "expr": { "type": "isset", "left": { "type": "list", "left": { "type": "array-access", "left": { "type": "property-access", "left": { "type": "variable", "value": "this", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 33, "char": 17 }, "right": { "type": "variable", "value": "routes", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 33, "char": 24 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 33, "char": 24 }, "right": { "type": "variable", "value": "name", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 33, "char": 29 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 33, "char": 30 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 33, "char": 32 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 33, "char": 32 }, "statements": [ { "type": "throw", "expr": { "type": "new", "class": "Router\\Exception\\RouteExistsException", "dynamic": 0, "parameters": [ { "parameter": { "type": "concat", "left": { "type": "string", "value": "Route exists ", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 34, "char": 67 }, "right": { "type": "variable", "value": "name", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 34, "char": 72 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 34, "char": 72 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 34, "char": 72 } ], "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 34, "char": 73 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 35, "char": 3 } ], "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 36, "char": 5 }, { "type": "declare", "data-type": "variable", "variables": [ { "variable": "route", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 36, "char": 12 } ], "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 37, "char": 5 }, { "type": "let", "assignments": [ { "assign-type": "variable", "operator": "assign", "variable": "route", "expr": { "type": "mcall", "variable": { "type": "property-access", "left": { "type": "variable", "value": "this", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 37, "char": 20 }, "right": { "type": "variable", "value": "routeFactory", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 37, "char": 34 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 37, "char": 34 }, "name": "create", "call-type": 1, "parameters": [ { "parameter": { "type": "variable", "value": "name", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 37, "char": 46 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 37, "char": 46 }, { "parameter": { "type": "variable", "value": "path", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 37, "char": 52 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 37, "char": 52 }, { "parameter": { "type": "variable", "value": "options", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 37, "char": 61 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 37, "char": 61 } ], "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 37, "char": 62 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 37, "char": 62 } ], "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 38, "char": 6 }, { "type": "mcall", "expr": { "type": "mcall", "variable": { "type": "property-access", "left": { "type": "variable", "value": "this", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 38, "char": 8 }, "right": { "type": "variable", "value": "routes", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 38, "char": 16 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 38, "char": 16 }, "name": "offsetSet", "call-type": 1, "parameters": [ { "parameter": { "type": "variable", "value": "name", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 38, "char": 31 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 38, "char": 31 }, { "parameter": { "type": "variable", "value": "route", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 38, "char": 38 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 38, "char": 38 } ], "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 38, "char": 39 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 39, "char": 8 }, { "type": "return", "expr": { "type": "variable", "value": "route", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 39, "char": 15 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 40, "char": 2 } ], "docblock": "**\n\t * Add route\n\t * @param string name\n\t * @param string path\n\t * @param array  options\n\t * @return Router\\Route\n\t *", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 48, "char": 3 }, { "visibility": [ "public" ], "type": "method", "name": "match", "parameters": [ { "type": "parameter", "name": "uri", "const": 0, "data-type": "string", "mandatory": 1, "reference": 0, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 49, "char": 35 }, { "type": "parameter", "name": "server", "const": 0, "data-type": "array", "mandatory": 0, "default": { "type": "null", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 49, "char": 56 }, "reference": 0, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 49, "char": 56 } ], "statements": [ { "type": "declare", "data-type": "variable", "variables": [ { "variable": "match", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 51, "char": 12 } ], "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 52, "char": 5 }, { "type": "declare", "data-type": "variable", "variables": [ { "variable": "route", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 52, "char": 12 } ], "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 53, "char": 5 }, { "type": "for", "expr": { "type": "mcall", "variable": { "type": "property-access", "left": { "type": "variable", "value": "this", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 53, "char": 21 }, "right": { "type": "variable", "value": "routes", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 53, "char": 29 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 53, "char": 29 }, "name": "getArrayCopy", "call-type": 1, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 53, "char": 45 }, "value": "route", "reverse": 0, "statements": [ { "type": "let", "assignments": [ { "assign-type": "variable", "operator": "assign", "variable": "match", "expr": { "type": "mcall", "variable": { "type": "variable", "value": "route", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 54, "char": 22 }, "name": "match", "call-type": 1, "parameters": [ { "parameter": { "type": "variable", "value": "uri", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 54, "char": 32 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 54, "char": 32 }, { "parameter": { "type": "variable", "value": "server", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 54, "char": 40 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 54, "char": 40 } ], "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 54, "char": 41 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 54, "char": 41 } ], "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 55, "char": 5 }, { "type": "if", "expr": { "type": "variable", "value": "match", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 55, "char": 13 }, "statements": [ { "type": "return", "expr": { "type": "variable", "value": "match", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 56, "char": 17 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 57, "char": 4 } ], "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 58, "char": 3 } ], "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 59, "char": 2 } ], "docblock": "**\n\t * Match routing\n\t * \n\t * @param  string uri\n\t * @param  array  server\n\t * @return Router\\RouteMatch|null\n\t *", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 66, "char": 6 }, { "visibility": [ "public" ], "type": "method", "name": "assemble", "parameters": [ { "type": "parameter", "name": "name", "const": 0, "data-type": "string", "mandatory": 1, "reference": 0, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 67, "char": 39 }, { "type": "parameter", "name": "params", "const": 0, "data-type": "array", "mandatory": 0, "default": { "type": "empty-array", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 67, "char": 58 }, "reference": 0, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 67, "char": 58 } ], "statements": [ { "type": "if", "expr": { "type": "not", "left": { "type": "mcall", "variable": { "type": "property-access", "left": { "type": "variable", "value": "this", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 68, "char": 12 }, "right": { "type": "variable", "value": "routes", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 68, "char": 20 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 68, "char": 20 }, "name": "offsetExists", "call-type": 1, "parameters": [ { "parameter": { "type": "variable", "value": "name", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 68, "char": 38 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 68, "char": 38 } ], "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 68, "char": 40 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 68, "char": 40 }, "statements": [ { "type": "throw", "expr": { "type": "new", "class": "Router\\Exception\\RouteDoesNotExistsException", "dynamic": 0, "parameters": [ { "parameter": { "type": "string", "value": "Route does not exists", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 69, "char": 82 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 69, "char": 82 } ], "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 69, "char": 83 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 70, "char": 3 } ], "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 71, "char": 8 }, { "type": "return", "expr": { "type": "mcall", "variable": { "type": "mcall", "variable": { "type": "property-access", "left": { "type": "variable", "value": "this", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 71, "char": 15 }, "right": { "type": "variable", "value": "routes", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 71, "char": 23 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 71, "char": 23 }, "name": "offsetGet", "call-type": 1, "parameters": [ { "parameter": { "type": "variable", "value": "name", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 71, "char": 38 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 71, "char": 38 } ], "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 71, "char": 40 }, "name": "assemble", "call-type": 1, "parameters": [ { "parameter": { "type": "variable", "value": "params", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 71, "char": 56 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 71, "char": 56 } ], "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 71, "char": 57 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 72, "char": 2 } ], "docblock": "**\n     * \n     * @param string name\n     * @param array params\n     * @throws Exception\\RouteDoesNotExistsException\n     *", "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 74, "char": 1 } ], "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 74, "char": 1 }, "file": "\/home\/chris\/www\/tiny\/tiny\/Router.zep", "line": 75, "char": 0 } ]
